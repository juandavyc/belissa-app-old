class canvas_firma{constructor(t){$("#"+t.id_container).prepend(`    <label id="canvas-title">    ${escapehtmljs(t.title_label)}    </label>   <canvas id="${t.id_container}_graficos"></canvas>    <br>    <button class="button primary small icon solid fa-undo"     id="${t.id_container}_borrar" style="max-width: 140px;"></button>    <button class="button primary small icon solid fa-maximize"     id="${t.id_container}_ventana" style="max-width: 140px;"></button>       `),this.canvas=document.getElementById(t.id_container+"_graficos"),this.ctx=this.canvas.getContext("2d"),this.is_drawing=!0,this.is_used=!1,this.responsive=t.responsive,this.canvas.setAttribute("width",$(this.responsive).width()-35),this.canvas.setAttribute("height",$(this.responsive).width()/2.8),this.ctx.lineWidth=3,this.ctx.lineJoin="round",this.ctx.strokeStyle="#FFF",this.image=new Image,this.fun_listener(t.id_container,this)}fun_listener(t,i){$("#"+t+"_borrar").on("click",function(t){return i.set_default(),!1}),$("#"+t+"_ventana").on("click",function(t){return i.set_resize(),!1}),$("#"+t+"_graficos").on("touchstart",function(t){i.drawstart(t.touches[0],i)}),$("#"+t+"_graficos").on("touchmove",function(t){i.drawmove(t.touches[0],i),t.preventDefault()}),$("#"+t+"_graficos").on("touchend",function(t){i.dragend(t.changedTouches[0],i)}),$("#"+t+"_graficos").mousedown(function(t){i.drawstart(t,i)}),$("#"+t+"_graficos").mousemove(function(t){i.drawmove(t,i)}),$("#"+t+"_graficos").mouseup(function(t){i.dragend(t,i)})}set_default(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.is_drawing=!0,this.is_used=!1}set_resize(){this.canvas.setAttribute("width",$(this.responsive).width()-35),this.canvas.setAttribute("height",$(this.responsive).width()/2.8)}drawstart(t,i){let s=i.getMousePos(t,i.canvas);i.ctx.lineWidth=4,i.ctx.lineJoin="bevel",i.ctx.strokeStyle="#000",i.ctx.beginPath(),i.ctx.moveTo(s.x,s.y),i.is_drawing=!1,i.is_used=!0}drawmove(t,i){let s=i.getMousePos(t,i.canvas);!i.is_drawing&&(i.ctx.lineTo(s.x,s.y),i.ctx.stroke())}dragend(t,i){i.is_drawing||(i.drawmove(t,i),i.is_drawing=!0)}getMousePos(t,i){var s=i.getBoundingClientRect();return{x:t.clientX-s.left,y:t.clientY-s.top}}get get_blob(){return this.canvas.toDataURL()}get get_status(){return this.is_used}set_status(t){this.is_used=t}set_blob(t){let i=this.ctx;this.image.onload=function(t){i.drawImage(this,0,0)},this.image.src=t}set_image(t){let i=this.ctx,s=this.canvas;this.set_default(),this.is_used=!0,this.image.onload=function(t){i.drawImage(this,0,0,this.width,this.height,0,0,s.width,s.height)},this.image.src=t}}