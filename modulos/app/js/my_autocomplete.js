function autocompleteCreateFather(t){$("#"+t.id_input_text).addClass("ui-autocomplete-input"),$("#"+t.id_input_text).focusin(function(){let e={is_ajax:!1,is_selected:!1,is_found_item:!1,array_items:[]};function n(){$("#"+t.id_input_text).autocomplete({delay:100,autoFocus:!0,minLength:1,source:function(i,a){i.term.length>0&&(e.is_ajax=!1,e.is_selected=!1,e.is_found_item=!1,$.ajax({url:t.url_select_ajax,type:"POST",dataType:"json",data:{palabra:i.term.trim().toUpperCase(),table:t.src_table,index:t.src_index,value:t.src_value},headers:{"csrf-token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",timeout:5e3,success:function(i){e.is_ajax=!0,"bien"===i.statusText?(e.array_items=i.options,a($.map(i.options,function(t){return{value:t.nombre,id:t.id}}))):"no_token"===i.statusText||"no_session"===i.statusText?(e.is_selected=!0,$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default),call_recuperar_session(n)):"sin_resultados"===i.statusText?a($.map(i.options,function(t){return{value:t.nombre,id:t.id}})):e.array_items=[]},error:function(e){console.log(e),$.alert(JSON.stringify(e)),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)}}))},select:function(n,i){$("#"+t.id_input_text).val(i.item.value),$("#"+t.id_input_select).val(i.item.id),$.each(t.input_sons,function(t,e){$("#"+e.id_input_text).val(e.input_value_default),$("#"+e.id_input_select).val(e.input_select_default)}),e.is_selected=!0},change:function(n,i){!1==e.is_ajax?($.alert("Campo requerido "),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)):!1==e.is_selected&&($.each(e.array_items,function(n,i){$("#"+t.id_input_text).val().toLowerCase()===i.nombre.toLowerCase()&&($("#"+t.id_input_text).val(i.nombre),$("#"+t.id_input_select).val(i.id),e.is_found_item=!0)}),!1==e.is_found_item&&autocompleteInsertItem(t))}}).data("ui-autocomplete")._renderItem=function(e,n){return 0==n.id&&"TODO"==n.value&&void 0!==t.is_todo&&!0==t.is_todo?$('<li class="ui-state">'+n.value+"</li>").appendTo(e):0==n.id?$('<li class="ui-state-disabled">'+n.value+"</li>").appendTo(e):$("<li>").append("<a>"+n.value+"</a>").appendTo(e)}}n()}),$("#"+t.id_input_text).focusout(function(){0==$("#"+t.id_input_select).val()&&$.each(t.input_sons,function(t,e){$("#"+e.id_input_text).val(e.input_value_default),$("#"+e.id_input_select).val(e.input_select_default)})})}function autocompleteInsertItem(t){$("#"+t.id_input_text).val().trim().length>0?$.confirm({icon:"fa fa-warning",title:" Alto ahi ! ",content:"<center> Este elemento no existe ...  <br> ( <b>"+escapehtmljs($("#"+t.id_input_text).val().toUpperCase())+"</b> )<br>Desea crearlo?</center>",typeAnimated:!0,scrollToPreviousElement:!1,scrollToPreviousElementAnimate:!1,columnClass:"xsmall",buttons:{button_yes:{text:"Si",btnClass:"btn-blue",action:function(){!function e(){$.confirm({title:"Espere... ",content:"Cargando, espere...",typeAnimated:!0,scrollToPreviousElement:!1,scrollToPreviousElementAnimate:!1,content:function(){var n=this;return $.ajax({url:t.url_insert_ajax,type:"POST",data:{nombre_elemento:$("#"+t.id_input_text).val(),table:t.src_table,value:t.src_value},headers:{"csrf-token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",timeout:5e3}).done(function(i){"bien"===i.statusText?(n.setTitle("Completado"),n.setContent("<center><b>( "+i.nombre+" )</b><br>Fue creado correctamente </center>"),$("#"+t.id_input_text).val(i.nombre),$("#"+t.id_input_select).val(i.id)):"no_token"===i.statusText||"no_session"===i.statusText?($("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default),n.close(),call_recuperar_session(e)):(n.setTitle(i.status),n.setContent(JSON.stringify(i)),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default))}).fail(function(e){n.setTitle("Error fatal"),n.setContent(JSON.stringify(e)),console.log(e),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)})},buttons:{aceptar:function(){}}})}()}},button_no:{text:"No",action:function(){$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)}}}}):($.alert("No puede ser vacio"),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default))}function autocompleteCreateSon(t){$("#"+t.id_input_text).addClass("ui-autocomplete-input"),$("#"+t.id_input_text).focusin(function(){let e={is_ajax:!1,is_selected:!1,is_found_item:!1,array_items:[]};if(0==$("#"+t.input_father_select).val())return $("#"+t.input_father_text).focus(),$.alert("El campo <b>( "+t.input_father_name+" ) </b> no debe estar vacio"),!1;$("#"+t.id_input_text).autocomplete({delay:100,autoFocus:!0,minLength:1,source:function(n,i){n.term.length>0&&(e.is_ajax=!1,e.is_selected=!1,e.is_found_item=!1,$.ajax({url:t.url_select_ajax,type:"POST",dataType:"json",data:{palabra:n.term.trim().toUpperCase(),id_father:$("#"+t.input_father_select).val(),table:t.src_table,index:t.src_index,value:t.src_value,father:t.src_father},headers:{"csrf-token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",timeout:5e3,success:function(n){e.is_ajax=!0,"bien"===n.statusText?(e.array_items=n.options,i($.map(n.options,function(t){return{value:t.nombre,id:t.id}}))):"no_token"===n.statusText||"no_session"===n.statusText?(e.is_selected=!0,$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default),call_recuperar_session(function(e){autocompleteCreateSon(t)})):"sin_resultados"===n.statusText?i($.map(n.options,function(t){return{value:t.nombre,id:t.id}})):e.array_items=[]},error:function(e){console.log(e),$.alert(JSON.stringify(e)),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)}}))},select:function(n,i){$("#"+t.id_input_text).val(i.item.value),$("#"+t.id_input_select).val(i.item.id),e.is_selected=!0},change:function(n,i){!1==e.is_ajax?($.alert("Campo requerido "),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)):!1==e.is_selected&&($.each(e.array_items,function(n,i){$("#"+t.id_input_text).val().toLowerCase()===i.nombre.toLowerCase()&&($("#"+t.id_input_text).val(i.nombre),$("#"+t.id_input_select).val(i.id),e.is_found_item=!0)}),!1==e.is_found_item&&autocompleteCreateItemSon(t))}}).data("ui-autocomplete")._renderItem=function(t,e){return 0==e.id?$('<li class="ui-state-disabled">'+e.value+"</li>").appendTo(t):$("<li>").append("<a>"+e.value+"</a>").appendTo(t)}})}function autocompleteCreateItemSon(t){$("#"+t.id_input_text).val().trim().length>0?$.confirm({icon:"fa fa-warning",title:"Alto ahi !",content:"<center> Este elemento no existe ...  <br> ( <b>"+escapehtmljs($("#"+t.id_input_text).val().toUpperCase())+"</b> )<br>\xbfDesea crearlo?</center>",typeAnimated:!0,scrollToPreviousElement:!1,scrollToPreviousElementAnimate:!1,columnClass:"xsmall",closeIcon:!0,buttons:{button_yes:{btnClass:"btn-blue",text:"Si",action:function(){$.confirm({title:"Espere... ",content:"Cargando, espere...",typeAnimated:!0,scrollToPreviousElement:!1,scrollToPreviousElementAnimate:!1,content:function(){var e=this;return $.ajax({url:t.url_insert_ajax,type:"POST",data:{nombre_elemento:$("#"+t.id_input_text).val(),id_father:$("#"+t.input_father_select).val(),father:t.src_father,table:t.src_table,value:t.src_value},headers:{"csrf-token":$('meta[name="csrf-token"]').attr("content")},dataType:"json",timeout:5e3}).done(function(n){"bien"===n.statusText?(e.setTitle("Completado"),e.setContent("<center><b>( "+n.nombre+" )</b><br>Fue creado correctamente </center>"),$("#"+t.id_input_text).val(n.nombre),$("#"+t.id_input_select).val(n.id)):"no_token"===n.statusText||"no_session"===n.statusText?($("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default),e.close(),call_recuperar_session(function(e){autocompleteCreateItemSon(t)})):(e.setTitle(n.status),e.setContent(n.id),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default))}).fail(function(n){e.setTitle("Error fatal"),e.setContent(JSON.stringify(n)),console.log(n),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)})},buttons:{aceptar:function(){}}})}},button_no:{text:"No",action:function(){$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default)}}}}):($.alert("No puede ser vacio"),$("#"+t.id_input_text).val(t.input_value_default),$("#"+t.id_input_select).val(t.input_select_default))}